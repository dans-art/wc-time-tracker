self.addEventListener("notificationclick",(function(event){console.log("On notification click: ",event.notification.tag),event.notification.close();const urlToOpen=new URL(event.notification.data.url,self.location.origin).href,promiseChain=clients.matchAll({type:"window",includeUncontrolled:!0}).then(windowClients=>{let matchingClient=null;for(let i=0;i<windowClients.length;i++){const windowClient=windowClients[i];if(windowClient.url===urlToOpen){console.log(windowClient),matchingClient=windowClient;break}}return matchingClient?(console.log("focus"),matchingClient.focus()):(console.log("open"),clients.openWindow(urlToOpen))});event.waitUntil(promiseChain)}));